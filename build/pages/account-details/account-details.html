<ion-navbar *navbar><button menuToggle><ion-icon name="menu"></ion-icon></button>
  <ion-title>{{account.name}}</ion-title>
</ion-navbar>

<ion-content class="account-details">
  <div class="tabsTicket">
      <ion-segment  class="position-button" [(ngModel)]="details_tab">
          <ion-segment-button  value="Stat">Acc Stat</ion-segment-button>
          <ion-segment-button value="Info">Info</ion-segment-button>
          <ion-segment-button value="Projects">Projects</ion-segment-button>
          <ion-segment-button value="Notes">Notes</ion-segment-button>
          <ion-segment-button value="Files">Files</ion-segment-button>
  </ion-segment>
</div> 

    
    
    <div [ngSwitch]="details_tab">
        <div [hidden]="details_tab != 'Stat'">
            <ion-list class="list img-top" no-lines style="height: 150px;">
        <div class="blue1 left width65 general-alignment height174">
  <ion-item class="textLogin">Open Tickets</ion-item>
  <ion-item (click)="openPage(0,account.account_statistics.invoices)" class="textLogin">Invoices</ion-item>
  <ion-item (click)="openPage(1, account.account_statistics.expenses)" class="textLogin">Expenses</ion-item>
  <ion-item (click)="openPage(2, account.account_statistics.hours)" class="textLogin">Hours</ion-item>
    <br>
        </div>
        <div class="right width35 general-alignment">
            <ion-item class="blue2">{{account.account_statistics.ticket_counts.open || 0}}</ion-item>
            <ion-item (click)="openPage(0)" class="blue2">{{account.account_statistics.invoices || 0}}</ion-item>
            <ion-item (click)="openPage(1)" class="blue2">{{getCurrency(account.account_statistics.expenses)}}</ion-item>
            <ion-item (click)="openPage(2)" class="blue2" [innerHTML]="account.account_statistics.hours | More:[10000,'<div class=item-inner><ion-label>VV</ion-label></div>']"></ion-item>
        </div>
</ion-list>
            <ion-item></ion-item>
            <ion-item class="margin">
<div class="list">
      <ion-segment [(ngModel)]="tabsTicket" class="height32">
          <ion-segment-button class="button-open" value="Open">Open Tickets</ion-segment-button>
          <ion-segment-button class="button-open" value="Close">Closed Tickets</ion-segment-button>
          </ion-segment>
                </div></ion-item>
            <br>
            <tickets-list [hidden]="tabsTicket != 'Open'" [mode]="['open', account.id]" [count]="account.account_statistics.ticket_counts.open"></tickets-list>
            <tickets-list [hidden]="tabsTicket != 'Close'" preload="1500" [mode]="['closed', account.id]" [count]="account.account_statistics.ticket_counts.closed"></tickets-list>
        </div>

        <ion-list class="list margin-top45" no-lines *ngSwitchWhen="'Info'">
        <ion-item class="margin color"><h3 class="left width35 text-left">BWD Acct#</h3>
     <h3 class="right width50 tkts-table">{{account.bwd_number}}</h3>
        </ion-item>
        <ion-item class="margin color">
     <h3 class="left width35 text-left">Acc#</h3>
     <h3 class="right width50 tkts-table">{{account.number}}</h3>
        </ion-item>
        <ion-item class="margin color">
 <h3 class="left width35 text-left">Ref1#</h3>
 <h3 class="right width50 tkts-table">{{account.ref1}}</h3>
        </ion-item>
            <ion-item class="margin color">
 <h3 class="left width35 text-left">Ref2#</h3>
 <h3 class="right width50 tkts-table">{{account.ref2}}</h3>
                </ion-item>
                <ion-item class="margin color">
 <h3 class="left width35 text-left">Org/Indiv</h3>
 <h3 class="right width50 tkts-table">{{account.is_organization ? "Organization" : "Individual"}}</h3>
                    </ion-item>
                    <ion-item class="margin color">
 <h3 class="left width35 text-left">Acc Rep</h3>
 <h3 class="right width50 tkts-table">{{account.representative_name}}</h3>
          </ion-item>
          <ion-item class="margin color">
 <h3 class="left width35 text-left space-initial">Internal location</h3>
 <h3 class="right width50 tkts-table">{{account.internal_location_name}}</h3>
          </ion-item>
          <ion-item class="margin color">
 <h3 class="left width35 text-left">Email Suffix</h3>
 <h3 class="right width50 tkts-table">{{account.email_suffix}}</h3>
         </ion-item>
         <ion-item class="margin color">
 <h3 class="left width35 text-left">Address 1</h3>
 <h3 class="right width50 tkts-table">{{account.address1}}</h3>
         </ion-item>
        <ion-item class="margin color">
 <h3 class="left width35 text-left">Address 2</h3>
 <h3 class="right width50 tkts-table">{{account.address2}}</h3>
       </ion-item>
      <ion-item class="margin color">
 <h3 class="left width35 text-left">City</h3>
 <h3 class="right width50 tkts-table">{{account.city}}</h3>
          </ion-item>
       <ion-item class="margin color">
 <h3 class="left width35 text-left">Postal Code</h3>
 <h3 class="right width50 tkts-table">{{account.zipcode}}</h3>
          </ion-item>
    <ion-item class="margin color">
 <h3 class="left width35 text-left">Country</h3>
 <h3 class="right width50 tkts-table">{{account.country}}</h3>
        </ion-item>
           <ion-item class="margin color">
 <h3 class="left width35 text-left">Phone 1</h3>
 <h3 class="right width50 tkts-table">{{account.phone1}}</h3>
               </ion-item>
               <ion-item class="margin color">
 <h3 class="left width35 text-left">Phone 2</h3>
 <h3 class="right width50 tkts-table">{{account.phone2}}</h3>
               </ion-item>
            <ion-item class="color" *ngFor="let customfield of account.customfields">
            <h3 class="left width35 text-left">{{customfield.Key}}</h3>
                <h3 class="right width50 tkts-table">{{customfield.Value || '&nbsp;'}}</h3>
            </ion-item>
        </ion-list> 
        
        <ion-list class="list margin-top45" *ngSwitchWhen="'Projects'">
            
            <div [hidden]="account.projects?.length" class="table grey2 menu-text">No Projects yet</div>
            
            <ion-item *ngIf="account.projects?.length" no-lines class="margin color">
    <p class="text width32 text-left left"></p>
    <h3 class="width17 left table table_account">Open</h3>
            <h3 class="width17 left table table_account">Logged</h3>
    <h3 class="width17 left table table_account">Remain</h3>  
    <h3 class="width17 right table table_account">Complete</h3>
        </ion-item>
        
           
    <ion-item class="color margin" *ngFor="let project of account.projects">
    <p class="text color width32 left table_account text-left">{{project.name}}</p>
    <h3 class="width17 left table">{{project.open_tickets}}</h3> 
    <h3 class="width17 left table">{{project.logged_hours}}</h3> 
    <h3 class="width17 left table">{{project.remaining_hours}}</h3> 
    <h3 class="width17 right table">{{project.complete}}</h3>
        </ion-item>
        </ion-list>
        
        <ion-list class="list margin-top63 max-width700" *ngSwitchWhen="'Notes'">
            
            <div *ngIf="account.note?.length" class="width100 textLogin note-account" [innerHTML]="account.note" type="text"></div>
          
              <textarea [value]="account.note" class="width100 textLogin commentText" type="text" placeholder="Notes:"></textarea>
    <button secondary 
            class="button_reply img-top right">Save Notes</button>
        </ion-list>
            <ion-list class="list margin-top45" no-lines *ngSwitchWhen="'Files'">
                
                 <div [hidden]="account.files?.length" class="table grey2 menu-text">No Files yet</div>
    <ion-item *ngFor="let file of account.files">
        <div class="left width59 tkts-table" [innerHTML]="getFileLink(file)"></div>
    <h3 class="right width38 text-left space-initial">{{file.name}}</h3>
        </ion-item>

            </ion-list>
    </div>

</ion-content>
<action-button [hidden]="details_tab != 'Stat'" [data]="{'account': { id: account.id, name: account.name}}"></action-button> 