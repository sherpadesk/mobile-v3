
<ion-toolbar>
    <ion-buttons start class="searchbar">
        <button (click)="dismissPage()">
            <span primary>Cancel</span>
        </button>
    </ion-buttons>
    <ion-title>Create Ticket</ion-title>
</ion-toolbar>

<ion-content>
    <div class="list max-width700 general-alignment">
        
            <select-list customwidth="true" class="left button-calc" ajax="true" [list]="selects.user" (onChanged)='saveSelect($event)' preload="true"></select-list>
            <div class="width10"><button (click)="addUser('user')" secondary fab class="buttonTicket button-ticket"><ion-icon class="button_circle2" name="md-add"></ion-icon></button>    </div>
        
        <select-list [list]="selects.account" preload="true" (onChanged)='saveSelect($event)'></select-list>
            
        <select-list  [list]="selects.location" preload="true" (onChanged)='saveSelect($event)'></select-list>
       
        <select-list customwidth="true" class="left button-calc" [list]="selects.tech" preload="true" (onChanged)='saveSelect($event)'></select-list><div width-10><button (click)="addUser('tech')" secondary fab class="buttonTicket button-ticket"><ion-icon class="button_circle2" name="md-add"></ion-icon></button></div>
        
            
        <select-list [list]="selects.project" preload="true" (onChanged)='saveSelect($event)'></select-list>
        <class-list preload="true" [list]="selects.class" (onChanged)='saveSelect($event)'></class-list>
        
    </div>
    <br>
    <form #addForm="ngForm">
                <div class="list max-width700">
                    <div class="tooltips"><input class="width100 blue3 subject-create commentText" [(ngModel)]="ticket.subject" placeholder="Subject"  ngControl="subject" #subject="ngForm" required maxlength="100"/>
                        <span [hidden]="subject.valid || subject.untouched">Subject is required and less 100 chars</span></div>
                    <br>
                    <textarea class="width100 textLogin commentText" type="text" [(ngModel)]="ticket.initial_post" ngControl="text" #note="ngForm"  placeholder="Details..."></textarea>

                <br>
                    <button [disabled]="!addForm.valid" secondary block (click)="onSubmit(addForm)"  type="submit" class="disable-hover button button-default button-block">Add Ticket</button>
                </div>
    </form>
</ion-content>
