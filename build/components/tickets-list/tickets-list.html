<ion-content style="height: 90vh;">
<ion-list class="list indent-bottom general-alignment2" no-lines>
    <div *ngIf="!is_empty" class="imgloading"><img [hidden]="tickets | async" class="imglogo img-padding" src="img/loading2.gif"></div>
    <ion-item-sliding class="border" *ngFor="let ticket of tickets | async" #slidingItem> 
        <ion-item (click)="itemTapped($event, ticket, slidingItem)"  class="item margin">
        <ion-avatar padding item-left class="img_padding margin admin padding-left">
            <li class="center avatarText">
                <span class="margin text-bold" item-left>#{{ticket.number}}</span>
                <img *ngIf="ticket.user_email" [alt]="ticket.user_firstname" class="img" [src]="ticket.user_email | Gravatar"/>
                <p class="admin color">{{ticket.user_firstname}}  {{ticket.user_lastname}}</p> </li>
        </ion-avatar>
        <div class="alignment">
        <li class="tkts-table">
       <h2 class="ellipsis ticket-subject color"><ion-icon dark name="mail" class="icon-ticket"></ion-icon>&nbsp;{{ticket.subject}}</h2>
            <h3 class="tickets" [innerHTML]="ticket.initial_post | Linebreaks"></h3>
            <p class="grey2 right class_name space-initial text-right">{{ticket.class_name}}</p></li></div>
    </ion-item>
        <ion-item-options>
        <button (click)="addPost(ticket, slidingItem)" class="grey3 disable-hover button button-default">
            <ion-icon></ion-icon>
            Add Response
        </button>

        <button secondary (click)="closeTicket(ticket, slidingItem)" class="disable-hover button button-default button-secondary">
            <ion-icon></ion-icon>
            Close Ticket
        </button>
        </ion-item-options>
        <div [hidden]="tickets | async" class="table grey2 menu-text">No {{mode[0] | Capitalize}} Tickets yet</div>
    </ion-item-sliding>
</ion-list>
<div *ngIf="is_empty" class="table grey2 menu-text">No {{mode[0] | Capitalize}} Tickets yet</div>
<ion-infinite-scroll threshold="20%" (infinite)="doInfinite($event)">
    <ion-infinite-scroll-content
      loadingSpinner="circles"
      loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
  </ion-content>
